# todo

各項目は必ずしも事実を裏付ける調査などはしていない。

[ ] ログイン

ユーザー名のみを入力することでユーザー登録できるようにする。
後で変更可能な ID を割り当てる。
再ログインにはパスワード登録が必要とする。

[ ] なりすまし防止

なりすましを防止すれば、高度な文脈のやり取りができるようになる。
自動的に ID を割り当てるなどして機能使用の手数を削減する。
多端末を使用するユーザーに ID を割り当てるにはパスワードなどが必要そう。
トリップは辞書攻撃に弱い。

[ ] パスワード登録

パスワードを設定していなかったユーザーがパスワードを登録できるようにする。

[ ] パスワードによるユーザー認証

パスワード設定済みのユーザーのみログインできるようにする。
多端末を利用するユーザーの同一性を簡単に証明するために必要。

[ ] ID 変更

ID を変更できるようにする。
Discord の Tag Number（#以下の数字）は変更できないようになっている？

[ ] 接続中ユーザー一覧

接続しているユーザー名の一覧を表示する。
ステータス表示のために必要。
ユーザー名の更新のために、あらかじめ ID を割り振らないといけない。

[ ] ステータス表示

長時間離席したときに、過去のメッセージを閲覧しなければ離席しているユーザーの状態が分からない。
長時間メッセージの投稿がなくても、やり取りがアクティブであることを示せる。
ステータスを表示することで、気軽に離席しやすく、やり取りに参加しやすくなる。

[ ] title に未読表示

title 要素に未読メッセージの存在を表示する。
タブに表記されたタイトルで未読メッセージの有無が分かる。
サービスを常時閲覧しなくてもよくなる。
外部のサービスや環境の情報をメッセージに反映しやすくなり、やり取りの内容が充実する。

[ ] マルチルーム化

メッセージの投稿先を一定の範囲に制限する。
後にユーザー追放などの機能を追加しやすくなる。

[ ] ドメイン名を登録する

ドメイン名を登録すればサーバーの IP アドレスが変更されても、同一サービスにアクセスできる。
デメリットは以下の通り。

- 有料
- 永続利用の必要

[ ] WebARENA などの VPS に移動する

（レスポンスタイム改善のため）

Heroku の無料ブランの Dyno（コンテナ）は 30 分アクセスがなければスリープしてしまう。
スリープしている Dyno がアクセスされてから復帰してレスポンスを返すまでには相当の時間がかかる。
ただし、この問題は Cron などで 30 分毎にアクセスすれば解決できる。

（データ容量のため）

Heorku の MongoDB アドオンはおよそ 496MB のストレージ容量まで無料で使用できるが、SSL 接続は無料ではできない。
このため、無料プランでは MongoDB にパスワードダイジェストなどの秘匿情報を保存できない。

mLab MongoDB - Add-ons - Heroku Elements
https://elements.heroku.com/addons/mongolab

Heroku の PostgreSQL アドオンは SSL 接続できるが、保存できるデータ量が 10000 行まで。

Heroku Postgres - Add-ons - Heroku Elements
https://elements.heroku.com/addons/heroku-postgresql

[ ] アクセスログ永続化

[ ] PayPal による定額課金

[ ] 課金による履歴表示制限緩和

履歴表示件数を制限した状態をデフォルトにしてヘビーユーザーには課金することを考える。

## suspend

[ ] 追放

IP アドレスによるアクセス制限をユーザー間で実施できるようにする。
悪質なユーザーのサービス使用を素早く停止できるが、アクセス制限機能自体が悪用されるおそれがある。
マルチルーム化した後、ルームごとにアクセス制限機能を設けることを考える。

[ ] Cloudflare などの DoS 対策

リクエスト数などによって従量課金されるため、アクセスが多すぎてサービスが停止などするまで導入しない。

[ ] 広告表示

基準が厳しそう。
広告配信を止められるとユーザー数の多寡に関係なく収益が途絶える。
見た目と使い勝手が悪くなる。

## not to do

[ ] リアルタイム名前変更

予測入力や文字変換の候補など意図しない文字列が名前として設定されてしまう。

## done

[x] 履歴を 24 件まで表示

過去の発言を繰り返すことを誘発し、活発なメッセージの投稿が期待できる。
気軽にメッセージを投稿してもらいたいときに、履歴表示件数を減らすことを考える。
